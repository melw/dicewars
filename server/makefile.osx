#---------------------------------------------------------------------------------
.SUFFIXES:
#---------------------------------------------------------------------------------

export TARGET		:=	dicewars_server
#export TARGET := $(shell basename $(CURDIR))
export TOPDIR		:=	$(CURDIR)

.PHONY: $(TARGET).o

#---------------------------------------------------------------------------------
# main targets
#---------------------------------------------------------------------------------
all: $(TARGET)

#---------------------------------------------------------------------------------
$(TARGET)	:	$(TARGET).o
#	g++ -DOSX -Wall -pedantic-errors linux/main.cpp -o $(TARGET) 
	g++ -DOSX -DUSE_DB -Wall linux/main.cpp -o $(TARGET) -I../include -L../lib -lmysqlclient

#---------------------------------------------------------------------------------
osx/$(TARGET).o:
	$(MAKE) -C osx
	
#---------------------------------------------------------------------------------
clean:
	$(MAKE) -C osxx clean
	rm -f $(TARGET).o $(TARGET)
